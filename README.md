# MATLAB .p to .m File Converter

This project provides tools to **batch convert MATLAB `.p` files into readable `.m` files**, with improved formatting and better compatibility for further editing and review.

---
## üìù Future Plans

- The current formatting process relies on Python scripts, which can be slow for large batches.
- In future updates, **formatting will be integrated directly into the C-based decryption workflow** to significantly improve performance.



## ‚ú® Version Update

- **Formatted** the decoded `.m` files to make them easier for users to read.
- **Resolved** most syntax errors.
- **Fixed** issues with missing spaces after control keywords (e.g., `if`, `for`, `switch`).
- **Improved** memory allocation to prevent conversion failures.

## üìö References

- [MATLAB Formatter for VSCode](https://github.com/affenwiesel/matlab-formatter-vscode)  
  *Recommended for post-processing and formatting the converted `.m` files.*
- [ptom_c](https://github.com/meilinxiaoxue/ptom_c)  
  *Original C implementation used as the base for conversion.*

## üõ† Components

### `pFile2m.exe`

- Generated by packaging the `pfile2m.py` script.
- Provides a **Python-based batch conversion** of `.p` files to `.m` files.
- Suitable for automating conversions in Windows environments.

### `ptom.exe`

- Recompiled from `main.c` and `ptom.c`.
- Depends on `zlib1.dll`.
- **Bug Fixes:**
  - Missing spaces after control keywords.
  - Insufficient memory allocation causing conversion failures.

### `main.c`

- Updated to improve compatibility with the Python script workflow.
- Ensures smoother integration when called programmatically.

## ‚öôÔ∏è Usage
 1. Batch Conversion
- **Graphical Interface (Recommended):**
  Double-click `pFile2m.exe` (or run `pfile2m.py`) to launch the user interface.
  - Click **‚ÄúÈÄâÊã© P Êñá‰ª∂‚Äù** to select one or more `.p` files.
  - The tool will automatically:
    - Convert each `.p` file to a `.m` file.
    - Format the `.m` file for better readability.
- **Command Line:**
  You can also start the conversion tool from a terminal:
  ```bash
  python pfile2m.py

2. **Formatting**
   - After conversion, apply the [MATLAB Formatter for VSCode](https://github.com/affenwiesel/matlab-formatter-vscode) to further clean up the code.

3. **Dependencies**
   - Make sure `zlib1.dll` is available in your system `PATH` when using `ptom.exe`.


